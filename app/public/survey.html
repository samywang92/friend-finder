<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <title>Friend Finder Survey</title>
</head>

<body>
    <div class="main-container">
        <div class="row">
            <div class="col m6 offset-m3 card blue accent-4">
                <div class="card-content white-text">
                    <span class="card-title valign center"><i class="material-icons">streetview</i> Friend Finder
                        Survey</span>
                    <div class="row">
                        <form class="col s12">
                            <div class="row">
                                <div class="input-field col s12">
                                    <input placeholder="Placeholder" id="name" type="text" class="validate">
                                    <label class="white-text" for="name">Name</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <textarea id="url-field" class="materialize-textarea"></textarea>
                                    <label for="url-field">Picture URL</label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select id="q1">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                            <label class="white-text">Questions 1 - Your mind is always buzzing with unexplored ideas
                                and plans.</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select id="q2">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                            <label class="white-text">Questions 2 - Generally speaking, you rely more on your experience
                                than your imagination.</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select id="q3">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                            <label class="white-text">Questions 3 - You find it easy to stay relaxed and focused even
                                when there is some pressure.</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select id="q4">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                            <label class="white-text">Questions 4 - You rarely do something just out of sheer
                                curiosity.</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select id="q5">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                            <label class="white-text">Questions 5 - People can rarely upset you.</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select id="q6">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                            <label class="white-text">Questions 6 - It is often difficult for you to relate to other
                                people’s feelings.</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select id="q7">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                            <label class="white-text">Questions 7 - In a discussion, truth should be more important than
                                people’s sensitivities.</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select id="q8">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                            <label class="white-text">Questions 8 - You rarely get carried away by fantasies and
                                ideas.</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select id="q9">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                            <label class="white-text">Questions 9 - You think that everyone’s views should be respected
                                regardless of whether they are supported by facts or not.</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <select id="q10">
                                <option value="" disabled selected>Choose your option</option>
                                <option value="1">1 (Strongly Disagree)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (Strongly Agree)</option>
                            </select>
                            <label class="white-text">Questions 10 - You feel more energetic after spending time with a
                                group of people.</label>
                        </div>
                    </div>

                </div>
                <div class="card-action">
                    <a class="waves-effect waves-light modal-trigger" id="submit-btn" href="#modal1">Submit</a>
                </div>
            </div>
        </div>
        <div class="row valign center">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/samywang92/friend-finder">GitHub Repo</a></p>
        </div>
    </div>

    <div id="modal1" class="modal valign center">
        <div class="modal-content">
            <h4>Congradulations!</h4>
            <p>We have found a best friend for you.</p>
            <p>Your best friend is: <span id="best-name"></span></p>
            <img id="best-img" src="" alt="Best Friend Image">
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-light btn-flat">Close</a>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        M.AutoInit();
        $(document).ready(function () {
            $("select").formSelect();
        });

        $(document).ready(function () {
            $('.modal').modal();
        });

        //var instance = M.FormSelect.getInstance(q1);

        $("#submit-btn").on("click", function (event) {
            event.preventDefault();

            var q1 = $("#q1").val();
            var q2 = $("#q2").val();
            var q3 = $("#q3").val();
            var q4 = $("#q4").val();
            var q5 = $("#q5").val();
            var q6 = $("#q6").val();
            var q7 = $("#q7").val();
            var q8 = $("#q8").val();
            var q9 = $("#q9").val();
            var q10 = $("#q10").val();

            var newFriend = {
                name: $("#name").val().trim(),
                url: $("#url-field").val().trim(),
                scores: [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10]
            };

            // Question: What does this code do??
            $.post("/api/friends", newFriend)
                .then(function (data) {
                    console.log("we here bois");
                    console.log("survey.html", data);
                    //alert(`Your best friends is ${data.name}`);
                    $("#best-name").text(data.name);
                    $("#best-img").attr("src",data.url);
                    console.log(data.url);
                });
        });

    </script>
</body>

</html>